<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>vue getting started</title>
    <script src="../../node_modules/vue/dist/vue.js"></script>
</head>
<body>
<div id="app">
    <div>用户信息</div>
    <ul>
        <li v-for="(value, key) in userInfo">{{key}}: {{value}}</li>
    </ul>


    <h2>对于已经创建的Vue实例，不允许动态增加根级别的交互属性</h2>
    <button onclick="addRootProp()">增加(点击报错)</button>
    <div>
        <!--年龄：{{age}}-->
    </div>

    <h2>解决方式：通过给内嵌对象增加属性解决</h2>
    <h4>增加一组属性</h4>
    <ul>
        <li>方式一：Vue.set(vm.userProfile, 'age', 27)<button onclick="addSingleProp_1()">增加单个属性</button></li>
        <li>方式二：vm.$set(vm.userProfile, 'age', 27)<button onclick="addSingleProp_2()">增加单个属性</button></li>
    </ul>
    
    <h4>增加多组属性</h4>
    <ul>
        <li>方式一：Object.assign(obj, {newValue})<button onclick="addMultipleProps_1()">增加多个属性(视图不变化，为什么？)</button></li>
        <li>方式一：obj = Object.assign({}, obj, {newValue})<button onclick="addMultipleProps_2()">增加多个属性</button></li>
        <li>方式二（需要lodash库）：_.extend()</li>
    </ul>
</div>
<script>
    var vm = new Vue({
        el: '#app',
        data: {
            userInfo: {
                name: 'yuyy'
            }
        }
    });

    function addRootProp() {
        vm.age = 24;
    }
    
    function addSingleProp_1() {
        Vue.set(vm.userInfo, 'age', 24)
    }

    function addSingleProp_2() {
        Vue.set(vm.userInfo, 'age', 24)
    }

    function addMultipleProps_1() {
        Object.assign(vm.userInfo, {
            gender: 'male',
            height: '183cm'
        });

        console.log(vm.userInfo);
    }


    function addMultipleProps_2() {
        vm.userInfo = Object.assign({}, vm.userInfo, {
            gender: 'male',
            height: '183cm'
        });

        console.log(vm.userInfo);
    }

</script>
</body>
</html>